# 2장 모델 주도 설계의 기본요소
혼란스러운 현실에도 불구하고 소프트웨어 구현을 건전한 상태로 유지하고 모델과의 밀접한 관계를 유지하려면 모델링과 설계의 우수 실천법을 적용해야 한다.
<br><br>
어떤 종류의 의사결정은 모델과 구현이 서로 정합된 상태를 유지해서 서로의 효과를 상호 보완하게 한다.
<br><br>
소프트웨어 시스템에서 도메인설계 외의 수많은 관심사로부터 도메인 설계를 격리하면 모델과 설계의 관계가 훨씬 분명해질 것이다. 개발 요소에 대해 이미 널리 입증된 패턴을 따른다면 구현에 실질적으로 도움이 되는 모델을 만드는 데도 도움이 될 것이다.
<br>
정교한 모델은 가장 근본적인 사항에 관심을 가질 때만 비로소 복잡성을 헤쳐나갈 수 있으며, 이는 팀에서 확신을 갖고 결합할 수 있는 상세 요소라는 결과로 나타난다.

## 04 도메인의 격리
시스템에서 도메인과 관련이 적은 기능으로부터 도메인 객체를 분리할 필요가 있으며, 그렇게 해서 도메인 개념을 다른 소프트웨어 기술에만 관련된 개념과 혼동하거나, 또는 시스템이라는 하나의 큰 덩어리 안에서 도메인을 전혀 바라보지 못하는 문제를 방지할 수 있다.

### LAYERED ARCHITECTURE (계층형 아키텍처)
객체지향 프로그램에서는 종종 사용자 인터페이스와 데이터베이스, 기타 보조적인 성격의 코드를 비즈니스 객체 안에 직접 작성하기도 한다. 이런식으로 코드를 작성하는 까닭은 단기적으로는 이렇게 하는 것이 뭔가를 동작하게 하는 가장 쉬운 방법이기 때문이다.
<br><br>
도메인에 관련된 코드가 상당한 양의 도메인과 관련이 없는 다른 코드를 통해 널리 확산될 경우 도메인에 관련된 코드를 확인하고 추론하기가 굉장히 힘들어진다.
<br><br>
매우 복잡한 작업을 처리하는 소프트웨어를 만들 경우 관심사의 분리(separation of concern)
가 필요하며 이로써 격리된 상태에 있는 각 설계 요소에 집중할 수 있다.
<br>
계층화의 핵심 원칙은 한 계층이 모든 요소는 오직 같은 계층에 존재하는 다른 요소나 계층상 "아래"에 위치한 요소에만 의존한다는 것이다. 위로 거슬러 올라가는 의사소통은 반드시 간접적인 매커니즘을 거쳐야 한다.
<br><br>
계층화의 가치는 각 계층에서 컴퓨터 프로그램의 특정 측면만을 전문적으로 다룬다는 데 있다. 이러한 전문화를 토대로 각 측면에서는 더욱 응집력 있는 설계가 가능해지며, 이로써 설계를 훨씬 더 쉽게 이해할 수 있다.

#### 성공적인 아키텍처의 개념적 계층
- 사용자 인터페이스(표현계층)
    - 사용자에게 정보를 보여주고 사용자의 명령을 해석하는 일을 책임진다. 간혹 사람이 아닌 다른 컴퓨터 시스템이 외부 행위자가 되기도 한다.

- 응용 계층
    - 소프트웨어가 수행할 작업을 정의하고 표현력 있는 도메인 객체가 문제를 해결하게 한다.
    - 이 계층에서 책임지는 작업은 업무상 중요하거나 다른 시스템의 응용 계층과 상호작용하는 데 필요한 것들이다.
    - 업무 규칙이나 지식이 포함되지 않으며, 오직 작업을 조정하고 아래에 위치한 계층에 포함된 도메인 객체의 협력자에게 작업을 위임한다.

- 도메인 계층(모델계층)
    - 업무 개념과 업무 상황에 관한 정보, 업무 규칙을 표현하는 일을 책임진다.
    - 업무 상황을 반영하는 상태를 제어하고 사용하며, 그와 같은 상태 저장과 관련된 기술적인 세부사항은 인프라스트럭처에 위임한다.

- 인프라스트럭처 계층
    - 상위 계층을 지원하는 일반화된 기술적 기능을 제공한다.
    - 애플리케이션에 대한 메시지 전송, 도메인 영속화, UI에 위젯을 그리는 것 등이 있다.


MDD를 가능케 하는 것은 결정적으로 <b>도메인 계층을</b> 분리하는 데 있다.
<br>
- 복잡한 프로그램을 여러 개의 계층으로 나눠라. 
- 응집력 있고 오직 아래에 위치한 계층에만 의존하는 각 계층에서 설계를 발전시켜라.
- 표준 아키텍처 패턴에 따라 상위 계층과의 결합을 느슨하게 유지하라.
- 도메인 모델과 관련된 코드는 모두 한 계층에 모으고 사용자 인터페이스 코드나 애플리케이션 코드, 인프라슽럭처 코드와 격리하라.
