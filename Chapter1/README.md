# 1장 동작하는 도메인 만들기

모든 소프트웨어 프로그램은 그 소프트웨어를 사용하는 사용자의 활동이나 관심사와 관련되어 있다.<br>사용자가 프로그램을 사용하는 대상 영역이 바로 해당 소프트웨어의 도메인이다.<br>
모델이란 지식을 선택적으로 단순화하고 의식적으로 구조화한 형태다. 우리는 적절한 모델을 토대로 정보를 이해하고 문제 자체에 집중할 수 있다.<br>
도메인 모델은 어떤 특정한 다이어그램이 아니라 다이어그램이 전달하고자 하는 아이디어다.<br>
도메인 모델링은 어떤 목적에 따라 제약에 구애받지 않고 현실을 표현하는 영화 제작에 더 가깝다.

## 도메인 주도 설계에서의 모델의 유용성
1. 모델과 핵심 설계는 서로 영향을 주며 구체화된다.
    - 모델을 의미있게 만들고 모델의 분석이 최종 산출물인 동작하는 프로그램에 적용되게끔 보장하는 것은 다름이 아닌 모델과 구현 간의 긴밀한 연결이다.
2. 모델은 모든 팀 구성원이 사용하는 언어의 중추다.
    - 모델과 구현이 연결되어 있으므로 개발자와 도메인 전문가가 의사소통하는데 별도의 변역 절차기 필요없다.
3. 모델은 지식의 정수만을 뽑아낸 것이다.
    - 모델은 도메인 지식을 조직화하고 가장 중요한 요소를 구분하는 팀의 합의된 방식이다.

## 소프트웨어의 본질
소프트웨어의 본질은 소프트웨어의 사용자를 위해 도메인에 관련된 문제를 해결하는 능력에 있다.<br>
팀의 리더가 도메인의 중심이 되는 개념을 알고 있어야 해당 도메인의 심층적인 이해를 반영하는 모델 개발이 모르는 사이에 갈피를 잡지 못할 때 소프트웨어 프로젝트를 올바른 방향으로 되돌려 놓을 수 있다.

## 1-1 지식 탐구

### 효과적인 모델링의 요소
1. 모델과 구현의 연계
    - 초기 프로토타입을 토대로 본질적인 연결 고리를 만든 다음, 이어지는 모든 반복 주기 내내 그 연결 고리를 유지했다.
2. 모델을 기반으로 하는 언어 정제
    - 서로 다른 지식의 용어를 설명한 후 이후 커뮤니케이션에선 별도의 해석 없이 의미를 명확하게 이해한다.
3. 풍부한 지식이 담긴 모델 개발
    - 객체는 행위를 지니고 규칙을 이행했다. 모델은 단순히 데이터 스키마가 아닌 복잡한 문제를 해결하는 데 필수불가결한 것이었다.
4. 모델의 정제
    - 모델이 점차 완전해지면서 중요한 개념이 더해졌으며, 마찬가지로 쓸모없거나 중요하지 않다고 판명된 개념이 제거됐다는 점 또한 중요하다.
5. 브레인스토밍과 실험

### 지식 탐구
효과적으로 도메인 모델링을 수행하는 사람들도 지식을 면밀히 탐구한다. 그들은 전체를 이해할 수 있는 간결한 관점을 찾아 체계적인 아이디어들을 차례로 시도해본다. 그 과정에서 수많은 모델이 시도, 거부, 변형된다.<br>
지식 탐구는 혼자서 하는 활동이 아니다. 개발자와 도메인 전문가로 구성된 팀은 대체로 개발자가 이끄는 가운데 협업한다.<br>
프로그래머가 리팩터링을 하면서 개발한다면 소프트웨어는 계속 확장이 가능한 말끔한 상태로 <b>유지되겠지만 프로그래머가 도메인에 관심이 없다면 그 이면에 숨겨진 원리는 알지 못한 채 애플리케이션에서 수행해야 할 사항만 습득한다.</b>

### 지속적인 학습
생산성이 매우 뛰어난 팀은 지속적인 학습을 바탕으로 의식적으로 지식을 함양한다.

### 풍부한 지식이 담긴 설계
모델에 포착돼 있는 지식은 단순한 "명사 찾기" 이상이다. 도메인에 관련된 엔티티만큼 업무 활동과 규칙도 도메인에 중요한데, 어떠한 도메인에도 다양한 범주의 개념이 존재한다.

설계를 디테일한 수준까지 올리고, 메서드의 명칭을 의미있게 작성하려면 단순 요구사항이 아닌 도메인지식을 알고 어떤 업무인지 파악하고 있어야 한다.
``` java
// 도메인 지식을 모르고 기능만 구현했을 때
if ((cargo.size() + voyage.bookedCargoSize()) >= (voyage.capacity() * 1.1)) {
    return -1;
}

// 도메인지식을 알고 있을 떄
// 개발자가 아니라도 의미파악이 훨씬 수월하다.
if (!overbookingPolicy.isAllowed(carge, voyage)) return -1;

public boolean isAllowed (Carge carge, Voyage voyage) {
    return (cargo.size() + voyage.bookedCargoSize()) <= (voyage.capacity() * 1.1);
}
```

## 1-2 의사소통과 언어 사용
도메인 모델은 소프트웨어 프로젝트를 위한 공통 언어의 핵심이 될 수 있다.<br>
모델은 프로젝트에 참여한 사람들의 머릿속에 축적된 개념을 모아 놓은 것으로서 도메인에 대한 통찰력을 반영하는 용어와 관계로 표현된다.

### UBIQUITOUS LANGUAGE (보편언어)
유연하고 풍부한 지식이 담긴 설계를 만들려면 다용도로 사용할 수 있는 팀의 공유 언어와 그 언어에 대한 활발한 실험이 필요하다. 하지만 아쉽게도 소프트웨어 프로젝트에서는 그와 같은 실험이 거의 일어나지 않는다.